<nav class="sidebar">
  <div class="sidebar-header">
    <h4 class="mb-0">
      <i class="bi bi-layers-fill"></i>
      <span class="ms-2">Frontsportin</span>
    </h4>
  </div>

  <div class="sidebar-menu">
    @for (item of menuItems(); track item.label) {
      <div class="menu-item">
        @if (item.children && item.children.length > 0) {
          <button
            class="menu-button"
            (click)="toggleMenu(item)"
            [class.expanded]="item.expanded"
          >
            <i [class]="'bi bi-' + item.icon"></i>
            <span class="menu-label">{{ item.label }}</span>
            <i class="bi bi-chevron-right menu-toggle ms-auto"></i>
          </button>

          @if (item.expanded) {
            <div class="submenu">
              @for (subitem of item.children; track subitem.label) {
                <div class="submenu-item">
                  @if (subitem.children && subitem.children.length > 0) {
                    <button
                      class="submenu-button"
                      (click)="toggleMenu(subitem)"
                      [class.expanded]="subitem.expanded"
                    >
                      <i [class]="'bi bi-' + subitem.icon"></i>
                      <span class="menu-label">{{ subitem.label }}</span>
                      <i class="bi bi-chevron-right menu-toggle ms-auto"></i>
                    </button>

                    @if (subitem.expanded) {
                      <div class="subsubmenu">
                        @for (subsubitem of subitem.children; track subsubitem.label) {
                          <a
                            [routerLink]="subsubitem.route"
                            routerLinkActive="active"
                            class="subsubmenu-link"
                          >
                            <i [class]="'bi bi-' + subsubitem.icon"></i>
                            <span>{{ subsubitem.label }}</span>
                          </a>
                        }
                      </div>
                    }
                  } @else {
                    <a
                      [routerLink]="subitem.route"
                      routerLinkActive="active"
                      class="submenu-link"
                    >
                      <i [class]="'bi bi-' + subitem.icon"></i>
                      <span class="menu-label">{{ subitem.label }}</span>
                    </a>
                  }
                </div>
              }
            </div>
          }
        } @else {
          <a
            [routerLink]="item.route"
            routerLinkActive="active"
            class="menu-button"
          >
            <i [class]="'bi bi-' + item.icon"></i>
            <span class="menu-label">{{ item.label }}</span>
          </a>
        }
      </div>
    }
  </div>
</nav>
